pkgname=mate-desktop
pkgver=0.0.0
pkgrel=6
pkgdesc="Library with common API for various MATE modules"
arch=(i686 x86_64)
license=(GPL LGPL)
depends=('libunique' 'libmatenotify' 'hicolor-icon-theme' 'gvfs-obexftp' 'obexd-client' 'mate-conf')
makedepends=(mate-doc-utils intltool)
options=(!emptydirs)
url="http://matsusoft.com.ar/projects"
groups=('mate')
source=(http://matsusoft.com.ar/uploads/gnu-linux/mate/${pkgname}.tar.gz)
sha256sums=('e9dcd4ae076360712e1e4df8c3de9de9642bf65d4b0b289cdb013a19b6240139')

build() {
	cd "$srcdir/$pkgname"
	# Python2 fix, not anylonger
	#sed -i '1s|#!/usr/bin/env python$|&2|' mate-about/mate-about

	PYTHON=/usr/bin/python2 ./configure --prefix=/usr --sysconfdir=/etc \
		--localstatedir=/var --disable-static --disable-scrollkeeper
	# --with-mate-distributor="Arch Linux AUR" not anylonger
	make
}

package() {
	cd "$srcdir/$pkgname"
	make DESTDIR="$pkgdir" install

	# prevent conflicts errors
	mv "${pkgdir}/usr/share/omf" "${pkgdir}/usr/share/mate-omf"
	rm "${pkgdir}/usr/share/pixmaps/apple-green.png"
	rm "${pkgdir}/usr/share/pixmaps/apple-red.png"
	rm "${pkgdir}/usr/share/pixmaps/gtkvim.png"
	rm "${pkgdir}/usr/share/pixmaps/kterm.xpm"
	rm "${pkgdir}/usr/share/pixmaps/monitor.png"
	rm "${pkgdir}/usr/share/pixmaps/vnterm.xpm"
}
